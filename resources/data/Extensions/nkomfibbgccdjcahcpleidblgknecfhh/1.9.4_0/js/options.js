class Options{constructor(){this.openedTab="settings",this.storage=STORAGE,this.initMaterialize(),this.initUI(),this.initHandlers(),this.initStorage(),this.initListeners()}initUI(){$("#"+this.openedTab).addClass("open")}initMaterialize(){$(document).ready(function(){$(".tabs").tabs()})}initListeners(){chrome.storage.onChanged.addListener(a=>{if(this.storage)for(let b in a)"country"==b&&(this.storage[b]=a[b].newValue)}),chrome.runtime.onMessage.addListener(()=>{})}initHandlers(){const a=$(document.body);a.on("click","#menu li",a=>{$("#menu").children().each((a,b)=>{b.classList.remove("open")}),a.target.classList.add("open"),$("#tabs").children().each((b,c)=>{c.classList.remove("open"),c.id==a.target.dataset.tab&&c.classList.add("open")})})}initStorage(){chrome.runtime.sendMessage({action:"getConfig"},a=>{this.storage=a})}setCurrentLocation(){chrome.runtime.sendMessage({action:"getConfig"},a=>{$("#location").removeClass("undefined"),$("#location").children().eq(0).attr("src",`/img/flags/${a.connectionInfo.code}.svg`),$("#location").children().eq(1).html(a.connectionInfo.country)})}}const o=new Options;